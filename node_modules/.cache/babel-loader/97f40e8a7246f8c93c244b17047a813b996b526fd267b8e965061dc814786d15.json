{"ast":null,"code":"import _defineProperty from\"C:/Users/User/Desktop/K.V/Education/SberUniversity/dogfood2/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import'./index.css';import{ReactComponent as Save}from\"./save.svg\";import cn from\"classnames\";import{calcDiscountPrice,isLiked}from\"../../utils/products\";import{Link}from\"react-router-dom\";import CardSkeleton from\"../../components/CardSkeleton/CardSkeleton\";import{useDispatch,useSelector}from\"react-redux\";import{useCallback}from\"react\";import{changeLikeProductThunk}from\"../../redux/redux-thunk/products-thunk/changeLikeProductThunk\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Card=function Card(_ref){var name=_ref.name,price=_ref.price,discount=_ref.discount,wight=_ref.wight,description=_ref.description,pictures=_ref.pictures,tags=_ref.tags,likes=_ref.likes,_id=_ref._id;var _useSelector=useSelector(function(state){return state.user;}),userInfo=_useSelector.userInfo,isLoading=_useSelector.isLoading;var discountPrice=calcDiscountPrice(price,discount);var liked=isLiked(likes,userInfo===null||userInfo===void 0?void 0:userInfo._id);var dispatch=useDispatch();var handleLikeClick=useCallback(function(){return dispatch(changeLikeProductThunk({_id:_id,likes:likes}));},[_id,dispatch,likes]);return/*#__PURE__*/_jsx(_Fragment,{children:isLoading?/*#__PURE__*/_jsx(CardSkeleton,{}):/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card__sticky card__sticky_type_top-left\",children:[discount!==0&&/*#__PURE__*/_jsx(\"span\",{className:\"card__discount\",children:\"-\".concat(discount,\"%\")}),tags&&tags.map(function(tag){var _cn;return/*#__PURE__*/_jsx(\"span\",{className:cn('tag',(_cn={},_defineProperty(_cn,'tag_type_new',tag==='new'),_defineProperty(_cn,'tag_type_sale',tag==='sale'),_cn)),children:tag},tag);})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card__sticky card__sticky_type_top-right\",children:/*#__PURE__*/_jsx(\"button\",{className:cn('card__favorite',{'card__favorite_is-active':liked}),onClick:handleLikeClick,children:/*#__PURE__*/_jsx(Save,{className:\"card__favorite-icon\"})})}),/*#__PURE__*/_jsxs(Link,{to:\"/product/\".concat(_id),className:\"card__link\",children:[/*#__PURE__*/_jsx(\"img\",{src:pictures,className:\"card__image\",alt:description}),/*#__PURE__*/_jsxs(\"div\",{className:\"card__desc\",children:[/*#__PURE__*/_jsxs(\"span\",{className:discount!==0?'card__old-price':'card__price',children:[price,\"\\xA0\\u20BD\"]}),discount!==0&&/*#__PURE__*/_jsxs(\"span\",{className:\"card__price card__price_type_discount\",children:[discountPrice,\"\\xA0\\u20BD\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"card__wight\",children:wight}),/*#__PURE__*/_jsx(\"p\",{className:\"card__name\",children:name})]})]}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"card__cart btn btn_type_primary\",children:\"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"})]})});};export default Card;","map":{"version":3,"names":["ReactComponent","Save","cn","calcDiscountPrice","isLiked","Link","CardSkeleton","useDispatch","useSelector","useCallback","changeLikeProductThunk","Card","name","price","discount","wight","description","pictures","tags","likes","_id","state","user","userInfo","isLoading","discountPrice","liked","dispatch","handleLikeClick","map","tag"],"sources":["C:/Users/User/Desktop/K.V/Education/SberUniversity/dogfood2/src/components/Card/Card.jsx"],"sourcesContent":["import './index.css';\nimport {ReactComponent as Save} from \"./save.svg\";\nimport cn from \"classnames\";\nimport {calcDiscountPrice, isLiked} from \"../../utils/products\";\nimport {Link} from \"react-router-dom\";\nimport CardSkeleton from \"../../components/CardSkeleton/CardSkeleton\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {useCallback} from \"react\";\nimport {changeLikeProductThunk} from \"../../redux/redux-thunk/products-thunk/changeLikeProductThunk\";\n\nconst Card = ({name, price, discount, wight, description, pictures, tags, likes, _id}) => {\n    const {userInfo, isLoading} = useSelector(state => state.user);\n    const discountPrice = calcDiscountPrice(price, discount);\n    const liked = isLiked(likes, userInfo?._id);\n    const dispatch = useDispatch();\n\n    const handleLikeClick = useCallback(() => {\n        return dispatch(changeLikeProductThunk({_id, likes}));\n    }, [_id, dispatch, likes])\n\n    return (\n        <>\n            {isLoading ? (\n                <CardSkeleton/>\n            ) : (\n                <div className='card'>\n                    <div className='card__sticky card__sticky_type_top-left'>\n                        {discount !== 0 && <span className='card__discount'>{`-${discount}%`}</span>}\n                        {tags && tags.map(tag => <span key={tag} className={cn('tag', {\n                            // [`tag_type_${tag}`]: true\n                            ['tag_type_new']: tag === 'new',\n                            ['tag_type_sale']: tag === 'sale',\n                        })}>{tag}</span>)}\n                    </div>\n                    <div className='card__sticky card__sticky_type_top-right'>\n                        <button className={cn('card__favorite', {\n                            'card__favorite_is-active': liked\n                        })} onClick={handleLikeClick}>\n                            <Save className='card__favorite-icon'/>\n                        </button>\n                    </div>\n                    <Link to={`/product/${_id}`} className='card__link'>\n                        <img src={pictures} className='card__image' alt={description}/>\n                        <div className='card__desc'>\n                            <span className={discount !== 0 ? 'card__old-price' : 'card__price'}>{price}&nbsp;₽</span>\n                            {discount !== 0 &&\n                                <span className='card__price card__price_type_discount'>{discountPrice}&nbsp;₽</span>}\n                            <span className='card__wight'>{wight}</span>\n                            <p className='card__name'>{name}</p>\n                        </div>\n                    </Link>\n                    <a href=\"#\" className='card__cart btn btn_type_primary'>В корзину</a>\n                </div>\n            )}\n\n        </>\n    );\n};\n\nexport default Card;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}