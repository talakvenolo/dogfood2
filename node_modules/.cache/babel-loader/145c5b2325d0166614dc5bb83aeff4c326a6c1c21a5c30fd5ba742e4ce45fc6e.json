{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { isError } from \"../../../utils/utilStore\";\nimport { getUserInfoThunk } from \"../../redux-thunk/user-thunk/getUserInfoThunk\";\nimport { registrationThunk } from \"../../redux-thunk/user-thunk/registrationThunk\";\nimport { loginThunk } from \"../../redux-thunk/user-thunk/loginThunk\";\nimport { checkTokenThunk } from \"../../redux-thunk/user-thunk/checkTokenThunk\";\nconst initialState = {\n  isAuth: false,\n  userInfo: {},\n  isRegistrationSuccess: false,\n  isLoading: false,\n  error: null\n};\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    logout: state => {\n      state.userInfo = {};\n      state.isAuth = false;\n      localStorage.removeItem('jwt');\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(getUserInfoThunk.fulfilled, (state, action) => {\n      state.userInfo = action.payload;\n      state.isLoading = false;\n    });\n    builder.addCase(getUserInfoThunk.pending, state => {\n      state.error = null;\n      state.isLoading = true;\n    });\n    builder.addCase(registrationThunk.fulfilled, (state, action) => {\n      if (Object.keys(action.payload).length > 0) {\n        state.isRegistrationSuccess = true;\n        state.isLoading = false;\n      }\n    });\n    builder.addCase(registrationThunk.pending, state => {\n      state.error = null;\n      state.isLoading = true;\n    });\n    builder.addCase(loginThunk.fulfilled, (state, action) => {\n      if (Object.keys(action.payload).length > 0) {\n        state.userInfo = action.payload.data;\n        state.isLoading = false;\n        if (action.payload.token) {\n          state.isAuth = true;\n        }\n      }\n    });\n    builder.addCase(loginThunk.pending, state => {\n      state.error = null;\n      state.isLoading = true;\n    });\n    builder.addCase(checkTokenThunk.fulfilled, (state, action) => {\n      if (Object.keys(action.payload).length > 0) {\n        state.userInfo = action.payload;\n        state.isAuth = true;\n        state.isLoading = false;\n      }\n    });\n    builder.addCase(checkTokenThunk.pending, state => {\n      state.error = null;\n      state.isLoading = true;\n    });\n    builder.addMatcher(isError, (state, action) => {\n      state.error = action.payload;\n      state.isLoading = false;\n      // state.isAuth = false;\n    });\n  }\n});\n\nexport const {\n  logout\n} = userSlice.actions;\nexport default userSlice.reducer;","map":{"version":3,"names":["createSlice","isError","getUserInfoThunk","registrationThunk","loginThunk","checkTokenThunk","initialState","isAuth","userInfo","isRegistrationSuccess","isLoading","error","userSlice","name","reducers","logout","state","localStorage","removeItem","extraReducers","builder","addCase","fulfilled","action","payload","pending","Object","keys","length","data","token","addMatcher","actions","reducer"],"sources":["C:/Users/User/Desktop/K.V/Education/SberUniversity/dogfood2/src/redux/redux-slice/user/userSlice.js"],"sourcesContent":["import {createSlice} from \"@reduxjs/toolkit\";\nimport {isError} from \"../../../utils/utilStore\";\nimport {getUserInfoThunk} from \"../../redux-thunk/user-thunk/getUserInfoThunk\";\nimport {registrationThunk} from \"../../redux-thunk/user-thunk/registrationThunk\";\nimport {loginThunk} from \"../../redux-thunk/user-thunk/loginThunk\";\nimport {checkTokenThunk} from \"../../redux-thunk/user-thunk/checkTokenThunk\";\n\nconst initialState = {\n    isAuth: false,\n    userInfo: {},\n    isRegistrationSuccess: false,\n    isLoading: false,\n    error: null\n}\nconst userSlice = createSlice({\n    name: 'user',\n    initialState,\n    reducers: {\n        logout: (state) => {\n            state.userInfo = {};\n            state.isAuth = false;\n            localStorage.removeItem('jwt');\n        }\n    },\n    extraReducers: (builder) => {\n        builder.addCase(getUserInfoThunk.fulfilled, (state, action) => {\n            state.userInfo = action.payload;\n            state.isLoading = false;\n        })\n\n        builder.addCase(getUserInfoThunk.pending, state => {\n            state.error = null;\n            state.isLoading = true;\n        })\n\n        builder.addCase(registrationThunk.fulfilled, (state, action) => {\n            if (Object.keys(action.payload).length > 0) {\n                state.isRegistrationSuccess = true;\n                state.isLoading = false;\n            }\n        })\n\n        builder.addCase(registrationThunk.pending, state => {\n            state.error = null;\n            state.isLoading = true;\n        })\n\n        builder.addCase(loginThunk.fulfilled, (state, action) => {\n            if (Object.keys(action.payload).length > 0) {\n                state.userInfo = action.payload.data;\n                state.isLoading = false;\n                if (action.payload.token) {\n                    state.isAuth = true;\n                }\n            }\n        })\n\n        builder.addCase(loginThunk.pending, state => {\n            state.error = null;\n            state.isLoading = true;\n        })\n\n        builder.addCase(checkTokenThunk.fulfilled, (state, action) => {\n            if (Object.keys(action.payload).length > 0) {\n                state.userInfo = action.payload;\n                state.isAuth = true;\n                state.isLoading = false;\n            }\n        })\n\n        builder.addCase(checkTokenThunk.pending, state => {\n            state.error = null;\n            state.isLoading = true;\n        })\n\n        builder.addMatcher(isError, (state, action) => {\n            state.error = action.payload;\n            state.isLoading = false;\n            // state.isAuth = false;\n\n        })\n    }\n})\n\nexport const {logout} = userSlice.actions;\n\nexport default userSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}